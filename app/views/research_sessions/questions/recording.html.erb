<%= c('Step') do %>
  <%= c('Title', text: 'Recording') %>

  <%= c('ErrorSummary', errors: @research_session.errors.to_hash) if @research_session.errors.any? %>

  <%= c('Form', action: wizard_path, patch: true) do %>
    <%= c('OfManyChoiceControl',
      id: 'research_session[recording_methods][]',
      name:'recording_methods',
      collection: "research_session[#{:recording_methods}][]",
      choices: RecordingMethods::NAME_VALUES,
      choices_selected: @research_session.recording_methods,
      legend: 'How will you be recording information?',
      choiceType: 'multi',
      errored: @research_session.errors['recording_methods'].present?,
      validation: @research_session.errors['recording_methods'][0]
    ) %>

    <%= c('OptionalField',
      isActive: (@research_session.recording_methods.include?("other") if @research_session.recording_methods.present?),
      controlled_by: '[id="research_session[other]"]') do %>
      <%= c('SinglelineTextControl',
        id: 'research_session[other_recording_method]',
        name: 'other_recording_method',
        value: @research_session.other_recording_method,
        label: t('research_session_attr_labels.other_recording_method'),
        size: 24,
        errored: @research_session.errors['other_recording_method'].present?,
        validation: @research_session.errors['other_recording_method'][0]
      ) %>
    <% end %>

    <%= c('Submit', text: 'Continue') %>
  <% end %>
<% end %>
